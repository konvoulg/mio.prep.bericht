{
  "resourceType": "StructureDefinition",
  "id": "RKI-PR-HIV-PrEP-Bericht-Immunization",
  "url": "https://rki.de/fhir/StructureDefinition/RKI_PR_HIV_PrEP_Bericht_Immunization",
  "version": "0.1.0",
  "name": "RKI_PR_HIV_PrEP_Bericht_Immunization",
  "title": "RKI_PR_HIV_PrEP_Bericht_Immunization",
  "status": "draft",
  "publisher": "Robert Koch Institut",
  "description": "Dieses Profil bildet eine Impfung bzw. Verabreichung eines Impfstoffs ab.",
  "copyright": "Im folgenden Profil können Codes aus den Codesystemen Snomed, Loinc oder Ucum enthalten sein, die dem folgenden Urheberrecht unterliegen: This material includes SNOMED Clinical Terms® (SNOMED CT®) which is used by permission of SNOMED International. All rights reserved. SNOMED CT®, was originally created by The College of American Pathologists. SNOMED and SNOMED CT are registered trademarks of SNOMED International. Implementers of these artefacts must have the appropriate SNOMED CT Affiliate license. This material contains content from LOINC (http://loinc.org). LOINC is copyright © 1995-2020, Regenstrief Institute, Inc. and the Logical Observation Identifiers Names and Codes (LOINC) Committee and is available at no cost under the license at http://loinc.org/license. LOINC® is a registered United States trademark of Regenstrief Institute, Inc. This product includes all or a portion of the UCUM table, UCUM codes, and UCUM definitions or is derived from it, subject to a license from Regenstrief Institute, Inc. and The UCUM Organization. Your use of the UCUM table, UCUM codes, UCUM definitions also is subject to this license, a copy of which is available at ​http://unitsofmeasure.org. The current complete UCUM table, UCUM Specification are available for download at ​http://unitsofmeasure.org. The UCUM table and UCUM codes are copyright © 1995-2009, Regenstrief Institute, Inc. and the Unified Codes for Units of Measures (UCUM) Organization. All rights reserved. THE UCUM TABLE (IN ALL FORMATS), UCUM DEFINITIONS, AND SPECIFICATION ARE PROVIDED \"AS IS.\" ANY EXPRESS OR IMPLIED WARRANTIES ARE DISCLAIMED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.",
  "fhirVersion": "4.0.1",
  "mapping": [
    {
      "identity": "workflow",
      "uri": "http://hl7.org/fhir/workflow",
      "name": "Workflow Pattern"
    },
    {
      "identity": "v2",
      "uri": "http://hl7.org/v2",
      "name": "HL7 v2 Mapping"
    },
    {
      "identity": "rim",
      "uri": "http://hl7.org/v3",
      "name": "RIM Mapping"
    },
    {
      "identity": "w5",
      "uri": "http://hl7.org/fhir/fivews",
      "name": "FiveWs Pattern Mapping"
    },
    {
      "identity": "cda",
      "uri": "http://hl7.org/v3/cda",
      "name": "CDA (R2)"
    }
  ],
  "kind": "resource",
  "abstract": false,
  "type": "Immunization",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Immunization",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Immunization",
        "path": "Immunization",
        "short": "Impfeintrag",
        "definition": "In diesem Profil werden die grundlegenden Inhalte zum Impfeintrag, also einer Impfzeile definiert. Diese besteht unter Anderem aus dem Impfstoff, dem Impfdatum u.s.w.",
        "constraint": [
          {
            "key": "Occurrence",
            "human": "Das Impfdatum muss mindestens aus TT.MM.JJJJ",
            "source": "https://rki.de/fhir/StructureDefinition/RKI_PR_HIV_PrEP_Bericht_Immunization",
            "severity": "error",
            "expression": "occurrenceDateTime.toString().length()>=10"
          },
          {
            "key": "atc1",
            "human": "Nur bei Angabe des Snomed Codes 787859002 Sonstiger Impfstoff (hier nicht gelistet) muss kein ATC-Code angeben werden.",
            "source": "https://rki.de/fhir/StructureDefinition/RKI_PR_HIV_PrEP_Bericht_Immunization",
            "severity": "error",
            "expression": "vaccineCode.coding.where(system='http://snomed.info/sct' and code!='787859002').exists() implies vaccineCode.coding.where(system='http://fhir.de/CodeSystem/dimdi/atc').exists()"
          }
        ]
      },
      {
        "id": "Immunization.meta",
        "path": "Immunization.meta",
        "mustSupport": true
      },
      {
        "id": "Immunization.meta.versionId",
        "path": "Immunization.meta.versionId",
        "mustSupport": true
      },
      {
        "id": "Immunization.meta.lastUpdated",
        "path": "Immunization.meta.lastUpdated",
        "mustSupport": true
      },
      {
        "id": "Immunization.meta.profile",
        "path": "Immunization.meta.profile",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "$this"
            }
          ],
          "rules": "open"
        }
      },
      {
        "id": "Immunization.meta.profile:mioProfile",
        "path": "Immunization.meta.profile",
        "sliceName": "mioProfile",
        "min": 0,
        "max": "*",
        "patternCanonical": "https://rki.de/fhir/StructureDefinition/RKI_PR_HIV_PrEP_Bericht_Immunization"
      },
      {
        "id": "Immunization.implicitRules",
        "path": "Immunization.implicitRules",
        "max": "0"
      },
      {
        "id": "Immunization.language",
        "path": "Immunization.language",
        "max": "0"
      },
      {
        "id": "Immunization.text.status",
        "path": "Immunization.text.status",
        "fixedCode": "extensions"
      },
      {
        "id": "Immunization.contained",
        "path": "Immunization.contained",
        "max": "0"
      },
      {
        "id": "Immunization.identifier",
        "path": "Immunization.identifier",
        "max": "0"
      },
      {
        "id": "Immunization.status",
        "path": "Immunization.status",
        "fixedCode": "completed"
      },
      {
        "id": "Immunization.statusReason",
        "path": "Immunization.statusReason",
        "max": "0"
      },
      {
        "id": "Immunization.vaccineCode",
        "path": "Immunization.vaccineCode",
        "short": "Impfstoff",
        "definition": "Dieses Element beschreibt den verabreichten Impfstoff.",
        "mustSupport": true
      },
      {
        "id": "Immunization.vaccineCode.coding",
        "path": "Immunization.vaccineCode.coding",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "system"
            }
          ],
          "rules": "closed"
        },
        "min": 1
      },
      {
        "id": "Immunization.vaccineCode.coding:snomed_CT",
        "path": "Immunization.vaccineCode.coding",
        "sliceName": "snomed_CT",
        "short": "Snomed CT",
        "definition": "Dieses Element beschreibt den Impfstoff als SNOMED CT®  Product Code.",
        "min": 1,
        "max": "1",
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "https://fhir.kbv.de/ValueSet/KBV_VS_MIO_Vaccination_Vaccine|1.1.0"
        }
      },
      {
        "id": "Immunization.vaccineCode.coding:snomed_CT.system",
        "path": "Immunization.vaccineCode.coding.system",
        "min": 1,
        "fixedUri": "http://snomed.info/sct",
        "mustSupport": true
      },
      {
        "id": "Immunization.vaccineCode.coding:snomed_CT.version",
        "path": "Immunization.vaccineCode.coding.version",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.vaccineCode.coding:snomed_CT.code",
        "path": "Immunization.vaccineCode.coding.code",
        "min": 1
      },
      {
        "id": "Immunization.vaccineCode.coding:snomed_CT.display",
        "path": "Immunization.vaccineCode.coding.display",
        "min": 1
      },
      {
        "id": "Immunization.vaccineCode.coding:snomed_CT.userSelected",
        "path": "Immunization.vaccineCode.coding.userSelected",
        "max": "0"
      },
      {
        "id": "Immunization.vaccineCode.coding:atc",
        "path": "Immunization.vaccineCode.coding",
        "sliceName": "atc",
        "short": "ATC",
        "definition": "Bezeichnung des Impfstoffs oder des Kombinationsimpfstoffes als Anatomisch-Therapeutisch-Chemische Klassifikation samt ATC-Code des Impfstoffs oder Kombinationsimpfstoffes. Grundlage ist die amtliche Fassung des ATC-Index für Deutschland (DIMDI). Es sind alle ATC-Codes aus der amtlichen Fassung des ATC-Index gelistet, unabhängig von deren Marktverfügbarkeit.",
        "min": 0,
        "max": "1",
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "https://fhir.kbv.de/ValueSet/KBV_VS_MIO_Vaccination_Vaccine_ATC|1.1.0"
        }
      },
      {
        "id": "Immunization.vaccineCode.coding:atc.system",
        "path": "Immunization.vaccineCode.coding.system",
        "min": 1,
        "fixedUri": "http://fhir.de/CodeSystem/dimdi/atc"
      },
      {
        "id": "Immunization.vaccineCode.coding:atc.version",
        "path": "Immunization.vaccineCode.coding.version",
        "min": 1
      },
      {
        "id": "Immunization.vaccineCode.coding:atc.code",
        "path": "Immunization.vaccineCode.coding.code",
        "min": 1
      },
      {
        "id": "Immunization.vaccineCode.coding:atc.display",
        "path": "Immunization.vaccineCode.coding.display",
        "min": 1
      },
      {
        "id": "Immunization.vaccineCode.coding:atc.userSelected",
        "path": "Immunization.vaccineCode.coding.userSelected",
        "max": "0"
      },
      {
        "id": "Immunization.vaccineCode.coding:pharmazentralnummer_pzn",
        "path": "Immunization.vaccineCode.coding",
        "sliceName": "pharmazentralnummer_pzn",
        "definition": "8-stellige Pharmazentralnummer (PZN) des Fertigarzneimittels (Impfstoffs). Die PZN definiert ein Fertigarzneimittel eindeutig.",
        "min": 0,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Immunization.vaccineCode.coding:pharmazentralnummer_pzn.system",
        "path": "Immunization.vaccineCode.coding.system",
        "min": 1,
        "fixedUri": "http://fhir.de/CodeSystem/ifa/pzn",
        "mustSupport": true
      },
      {
        "id": "Immunization.vaccineCode.coding:pharmazentralnummer_pzn.code",
        "path": "Immunization.vaccineCode.coding.code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.vaccineCode.coding:pharmazentralnummer_pzn.display",
        "path": "Immunization.vaccineCode.coding.display",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.vaccineCode.coding:pharmazentralnummer_pzn.userSelected",
        "path": "Immunization.vaccineCode.coding.userSelected",
        "max": "0"
      },
      {
        "id": "Immunization.vaccineCode.text",
        "path": "Immunization.vaccineCode.text",
        "short": "Handelsname",
        "definition": "Bezeichnung des Handelsnamens des verabreichten Impfstoffs.",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.patient",
        "path": "Immunization.patient",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://rki.de/fhir/StructureDefinition/RKI_PR_HIV_PrEP_Bericht_Patient"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Immunization.patient.reference",
        "path": "Immunization.patient.reference",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.patient.type",
        "path": "Immunization.patient.type",
        "max": "0"
      },
      {
        "id": "Immunization.patient.identifier",
        "path": "Immunization.patient.identifier",
        "type": [
          {
            "code": "Identifier",
            "profile": [
              "http://fhir.de/StructureDefinition/identifier-kvid-10"
            ]
          }
        ]
      },
      {
        "id": "Immunization.patient.display",
        "path": "Immunization.patient.display",
        "max": "0"
      },
      {
        "id": "Immunization.encounter",
        "path": "Immunization.encounter",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://rki.de/fhir/StructureDefinition/RKI_PR_HIV_PrEP_Bericht_Encounter_General"
            ]
          }
        ]
      },
      {
        "id": "Immunization.occurrence[x]",
        "path": "Immunization.occurrence[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "rules": "open"
        },
        "mustSupport": true
      },
      {
        "id": "Immunization.occurrence[x]:occurrenceDateTime",
        "path": "Immunization.occurrence[x]",
        "sliceName": "occurrenceDateTime",
        "short": "Datum der Schutzimpfung",
        "definition": "Im Anwendungsszenario \"Daten eintragen\" entspricht es dem Datum, an dem die Impfung durchgeführt wurde.\n\nIm Anwendungsszenario \"Daten nach- oder übertragen\" entspricht es dem Datum oder einer gröberen Angabe der Zeit bzw. des Zeitraums einer zurückliegenden Impfung, die im Impfpass nachgetragen wird. Wird eine abgeschlossene Grundimmunisierung übertragen, so sollte das Datum der Gabe der letzten Dosis dokumentiert werden.",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "dateTime"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Immunization.recorded",
        "path": "Immunization.recorded",
        "max": "0"
      },
      {
        "id": "Immunization.reportOrigin",
        "path": "Immunization.reportOrigin",
        "max": "0"
      },
      {
        "id": "Immunization.location",
        "path": "Immunization.location",
        "max": "0"
      },
      {
        "id": "Immunization.manufacturer",
        "path": "Immunization.manufacturer",
        "short": "Hersteller",
        "definition": "Name des herstellenden bzw. des anbietenden Unternehmens. Dies bietet eine Zusatzinformation zum Fertigarzneimittel.",
        "mustSupport": true
      },
      {
        "id": "Immunization.manufacturer.reference",
        "path": "Immunization.manufacturer.reference",
        "max": "0"
      },
      {
        "id": "Immunization.manufacturer.type",
        "path": "Immunization.manufacturer.type",
        "max": "0"
      },
      {
        "id": "Immunization.manufacturer.identifier",
        "path": "Immunization.manufacturer.identifier",
        "max": "0"
      },
      {
        "id": "Immunization.manufacturer.display",
        "path": "Immunization.manufacturer.display",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.lotNumber",
        "path": "Immunization.lotNumber",
        "short": "Chargenbezeichnung",
        "definition": "Chargenbezeichnung des verabreichten Impfstoffs.",
        "min": 1,
        "maxLength": 20,
        "mustSupport": true
      },
      {
        "id": "Immunization.expirationDate",
        "path": "Immunization.expirationDate",
        "max": "0"
      },
      {
        "id": "Immunization.site",
        "path": "Immunization.site",
        "max": "0"
      },
      {
        "id": "Immunization.route",
        "path": "Immunization.route",
        "max": "0"
      },
      {
        "id": "Immunization.doseQuantity",
        "path": "Immunization.doseQuantity",
        "max": "0"
      },
      {
        "id": "Immunization.performer",
        "path": "Immunization.performer",
        "max": "0"
      },
      {
        "id": "Immunization.note",
        "path": "Immunization.note",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "text"
            }
          ],
          "ordered": true,
          "rules": "openAtEnd"
        },
        "short": "Notes",
        "definition": "In diesem Element wird der Hinweis und die Anmerkungen zur durchgeführten Impfung eingetragen werden.",
        "min": 1,
        "max": "2",
        "mustSupport": true
      },
      {
        "id": "Immunization.note.author[x]",
        "path": "Immunization.note.author[x]",
        "max": "0"
      },
      {
        "id": "Immunization.note.time",
        "path": "Immunization.note.time",
        "max": "0"
      },
      {
        "id": "Immunization.note:hinweis",
        "path": "Immunization.note",
        "sliceName": "hinweis",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Immunization.note:hinweis.text",
        "path": "Immunization.note.text",
        "fixedMarkdown": "Bei einer ungewöhnlichen Impfreaktion sollte die impfende ärztliche Person benachrichtigt werden. Die ärztlich tätige Person hat, wenn der Verdacht einer gesundheitlichen Schädigung besteht, die über das übliche Ausmaß einer Impfreaktion hinaus geht verpflichtet, den Verdacht dem zuständigen Gesundheitsamt namentlich zu melden (§ 6 Absatz 1 Nr 3 des lnfektionsschutzgesetzes • lfSG) Im Falle eines Impfschadens besteht unter den Voraussetzungen des § 60 Absatz 1 lfSG ein Anspruch auf Entschädigung in entsprechender Anwendung der Vorschriften des Bundesversorgungsgesetzes. Der Antrag ist bei der für die Durchführung des Bundesversorgungsgesetzes zuständigen Behörde (§ 64 Absatz 1 lfSG, i.d.R. 'Versorgungsamt') zu stellen. Weitere Auskünfte erteilt das zuständige Gesundheitsamt."
      },
      {
        "id": "Immunization.reasonCode",
        "path": "Immunization.reasonCode",
        "max": "0"
      },
      {
        "id": "Immunization.reasonReference",
        "path": "Immunization.reasonReference",
        "max": "0"
      },
      {
        "id": "Immunization.isSubpotent",
        "path": "Immunization.isSubpotent",
        "max": "0"
      },
      {
        "id": "Immunization.subpotentReason",
        "path": "Immunization.subpotentReason",
        "max": "0"
      },
      {
        "id": "Immunization.education",
        "path": "Immunization.education",
        "max": "0"
      },
      {
        "id": "Immunization.programEligibility",
        "path": "Immunization.programEligibility",
        "max": "0"
      },
      {
        "id": "Immunization.fundingSource",
        "path": "Immunization.fundingSource",
        "max": "0"
      },
      {
        "id": "Immunization.reaction",
        "path": "Immunization.reaction",
        "max": "0"
      },
      {
        "id": "Immunization.protocolApplied",
        "path": "Immunization.protocolApplied",
        "mustSupport": true
      },
      {
        "id": "Immunization.protocolApplied.extension:datum_der_Folgeimpfung",
        "path": "Immunization.protocolApplied.extension",
        "sliceName": "datum_der_Folgeimpfung",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_MIO_Vaccination_Follow_Up|1.1.0"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Immunization.protocolApplied.series",
        "path": "Immunization.protocolApplied.series",
        "max": "0"
      },
      {
        "id": "Immunization.protocolApplied.authority",
        "path": "Immunization.protocolApplied.authority",
        "max": "0"
      },
      {
        "id": "Immunization.protocolApplied.targetDisease",
        "path": "Immunization.protocolApplied.targetDisease",
        "short": "Erkrankung gegen die geimpft wird",
        "definition": "Dieses Element beschreibt den Namen der Krankheit, gegen die geimpft wird. Es handelt sich um ein mehrfach auswählbares Element, da ein Impfstoff mehrere einzelne Wirkstoffe enthalten kann und somit mehrere Erkrankungen, gegen die geimpft wird, adressiert werden können.",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "https://fhir.kbv.de/ValueSet/KBV_VS_MIO_Vaccination_TargetDisease|1.1.0"
        }
      },
      {
        "id": "Immunization.protocolApplied.targetDisease.coding",
        "path": "Immunization.protocolApplied.targetDisease.coding",
        "min": 1,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Immunization.protocolApplied.targetDisease.coding.system",
        "path": "Immunization.protocolApplied.targetDisease.coding.system",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.protocolApplied.targetDisease.coding.version",
        "path": "Immunization.protocolApplied.targetDisease.coding.version",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.protocolApplied.targetDisease.coding.code",
        "path": "Immunization.protocolApplied.targetDisease.coding.code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Immunization.protocolApplied.targetDisease.coding.display",
        "path": "Immunization.protocolApplied.targetDisease.coding.display",
        "min": 1,
        "mustSupport": true
      }
    ]
  }
}
